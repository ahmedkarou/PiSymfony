{# {% extends 'test/index.html.twig' %}

{% block eventbody %}

    <!-- latest BLog Section Begin -->
    <section class="latest-blog spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title">
                        <h2>Latest News</h2>
                        <p>Do not miss anything topic about the event</p>
                    </div>
                </div>
            </div>
            <div class="row">
                {% for event in events %}
                    <div class="col-lg-6">
                        <div class="latest-item set-bg large-item" data-setbg="{{ event.image ?  asset('uploads/image/' ~ event.image) : 'img/default-event.jpg' }}">
                            <div class="li-tag">{{ event.type }}</div>
                            <div class="li-text">
                                <h4><a href="#subscribe-section" data-event-id="{{ event.id }}">{{ event.name }}</a></h4>
                                <p>{{ event.description }}</p>
                                <span><i class="fa fa-calendar"></i> {{ event.date ? event.date|date('d M, Y') : 'Date not set' }}</span>
                                <span><i class="fa fa-users"></i> Capacity: {{ event.capacite }}</span>
                                <span><i class="fa fa-map-marker"></i> {{ event.localization }}</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}

{% block addparticipant %}
    <section class="newslatter-section" id="subscribe-section">
    <div class="container">
        <div class="newslatter-inner set-bg" data-setbg="img/newslatter-bg.jpg">
            <div class="ni-text">
                <h3>Subscribe To Event</h3>
                <p>Subscribe to our newsletter and don’t miss anything</p>
            </div>
            <form action="{{ path('subscribe') }}" method="post" class="ni-form">
                <div class="form-group">
                    <input type="text" name="nom_par" placeholder="Your last name" required>
                </div>
                <div class="form-group">
                    <input type="text" name="prenom_par" placeholder="Your first name" required>
                </div>
                <div class="form-group">
                    <input type="text" name="age_par" placeholder="Your age">
                </div>
                <input type="hidden" name="event_id" id="event_id">
                
                <button type="submit">Subscribe</button>
            </form>
        </div>
    </div>
</section>

<script>
  <script>
     jQuery(document).ready(function($) {
        // Function to scroll to anchor links
        function scrollToAnchor(anchor) {
            var target = $(anchor);

            if (target.length) {
                $('html, body').animate({
                    scrollTop: target.offset().top
                }, 1000, function() {
                    // Update URL with event ID after scrolling finishes
                    var eventId = target.find('a').data('event-id');
                    console.log("Event ID from scroll: ", eventId);
                    window.location.hash = eventId;
                });
            }
        }

        // Smooth scrolling to anchor links
        $('a[href*="#"]:not([href="#"])').click(function() {
            var targetId = $(this).attr('href');
            scrollToAnchor(targetId);
            return false;
        });

        // Check the initial URL and scroll if needed
        var initialHash = window.location.hash;
        if (initialHash) {
            scrollToAnchor(initialHash);
        }

        // Populate the form with selected event's data
        $('a[data-event-id]').on('click', function() {
            var eventId = $(this).data('event-id');
            console.log("Event ID from click: ", eventId);
            
            // Set event ID to hidden input field
            $('#event_id').val(eventId);
        });
    });
</script>
{% endblock %} #}
{% extends 'test/index.html.twig' %}

{% block eventbody %}
    <!-- latest BLog Section Begin -->
    <section class="latest-blog spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title">
                        <h2>Latest News</h2>
                        <p>Do not miss anything topic about the event</p>
                    </div>
                </div>
            </div>
            <div class="row">
                {% for event in events %}
                    <div class="col-lg-6">
                        <div class="latest-item set-bg large-item" data-setbg="{{ event.image ?  asset('uploads/image/' ~ event.image) : 'img/default-event.jpg' }}">
                            <div class="li-tag">{{ event.type }}</div>
                            <div class="li-text">
                                <h4><a href="#subscribe-section" data-event-id="{{ event.id }}" class="event-link">{{ event.name }}</a></h4>
                                <p>{{ event.description }}</p>
                                <span><i class="fa fa-calendar"></i> {{ event.date ? event.date|date('d M, Y') : 'Date not set' }}</span>
                                <span><i class="fa fa-users"></i> Capacity: {{ event.capacite }}</span>
                                <span><i class="fa fa-map-marker"></i> {{ event.localization }}</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}

{% block addparticipant %}
    <section class="newslatter-section" id="subscribe-section">
    <div class="container">
        <div class="newslatter-inner set-bg" data-setbg="img/newslatter-bg.jpg">
            <div class="ni-text">
                <h3>Subscribe To Event</h3>
                <p>Subscribe to our newsletter and don’t miss anything</p>
            </div>
            <form action="{{ path('subscribe') }}" method="post" class="ni-form">
                <div class="form-group">
                    <input type="text" name="nom_par" placeholder="Your last name" required>
                </div>
                <div class="form-group">
                    <input type="text" name="prenom_par" placeholder="Your first name" required>
                </div>
                <div class="form-group">
                    <input type="text" name="age_par" placeholder="Your age">
                </div>
                <input type="hidden" name="event_id" id="event_id">
                
                <button type="submit">Subscribe</button>
            </form>
        </div>
    </div>
</section>

<script>
    jQuery(document).ready(function($) {
        // Function to scroll to anchor links
        function scrollToAnchor(anchor) {
            var target = $(anchor);

            if (target.length) {
                $('html, body').animate({
                    scrollTop: target.offset().top
                }, 1000, function() {
                    // Update URL with event ID after scrolling finishes
                    var eventId = target.find('.event-link').data('event-id');
                    console.log("Event ID from scroll: ", eventId);
                    window.location.hash = eventId;
                });
            }
        }

        // Smooth scrolling to anchor links
        $('a[href*="#"]:not([href="#"])').click(function() {
            var targetId = $(this).attr('href');
            scrollToAnchor(targetId);
            return false;
        });

        // Check the initial URL and scroll if needed
        var initialHash = window.location.hash;
        if (initialHash) {
            scrollToAnchor(initialHash);
        }

        // Populate the form with selected event's data
        $('.event-link').on('click', function() {
            var eventId = $(this).data('event-id');
            console.log("Event ID from click: ", eventId);
            
            // Set event ID to hidden input field
            $('#event_id').val(eventId);
        });
    });
</script>
{% endblock %}
